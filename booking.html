<!DOCTYPE html>
<html>
<head>
  <title>Book Workspace</title>
  <style>
    body { 
      font-family: Arial, sans-serif; 
      margin: 0; 
      padding: 0; 
      background-color: rgb(216, 215, 215);
      background-size: cover;
    }
    .container { max-width: 800px; margin: auto; padding: 20px; }
    .logo { text-align: center; margin-bottom: 10px; }
    .logo h1 { margin: 5px 0; }
    .workspace-image { text-align: center; margin-bottom: 20px; }
    .workspace-image img { max-width: 100%; border-radius: 10px; }
    .booking-box {
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(5px);
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0px 4px 12px rgba(0,0,0,0.1);
    }
    .form-group { margin-bottom: 15px; }
    label { font-weight: bold; display: block; margin-bottom: 5px; }
    input, select { width: 100%; padding: 8px; }
    .hidden { display: none; }
    button { 
      padding: 10px 20px; 
      background: #28a745; 
      color: white; 
      border: none; 
      cursor: pointer; 
      border-radius: 5px;
    }
    button:hover { background: #218838; }
  </style>
  <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
  <link rel="icon" type="image/png" href="LOGOMAIN.png">
</head>
<body>

<!-- Header Navigation -->
<header style="background: white; border-bottom: 1px solid #eee; padding: 10px 40px; display: flex; align-items: center; justify-content: space-between; font-family: Arial, sans-serif;">
  <div style="font-size: 24px; font-weight: bold;">WorkTribe</div>
</header>

<div class="container">
  <div class="logo"><h1>WorkTribe</h1></div>
  <div class="booking-box">
    
    <p><b>Available Seats:</b> <span id="availableSeats">12</span></p>

    <form id="bookingForm">
      <div class="form-group">
        <label>Name (Fetched from Registration):</label>
        <input type="text" id="userName" value="John Doe" readonly>
      </div>

      <div class="form-group">
        <label>Email (Fetched from Registration):</label>
        <input type="email" id="userEmail" value="johndoe@email.com" readonly>
      </div>

      <div class="form-group">
        <label>Contact (Fetched from Registration):</label>
        <input type="text" id="userContact" value="+91 9876543210" readonly>
      </div>

      <div class="form-group">
        <label>Booking Type:</label>
        <input type="text" id="bookingType" value="Individual" readonly>
      </div>

      <!-- Booking Duration -->
      <div class="form-group">
        <label>Booking Duration:</label>
        <select id="duration" onchange="toggleCustomDates()">
          <option value="weekly">Weekly</option>
          <option value="monthly">Monthly</option>
          <option value="yearly">Yearly</option>
          <option value="custom">Custom</option>
        </select>
      </div>

      <!-- Custom Date Range -->
      <div class="form-group hidden" id="customDates">
        <label>Start Date:</label>
        <input type="date" id="startDate">
        <label style="margin-top:10px;">End Date:</label>
        <input type="date" id="endDate">
      </div>

      <div class="form-group">
        <label>Number of Persons:</label>
        <input type="number" id="persons" min="1" max="12" value="1">
      </div>

      <div class="form-group" id="idProofSection">
        <label>ID Proof:</label>
        <input type="file" id="idProof" accept="image/*,application/pdf">
      </div>

      <div class="form-group hidden" id="companyProofSection">
        <label>Company Proof:</label>
        <input type="file" id="companyProof" accept="image/*,application/pdf">
      </div>

      <button type="button" onclick="proceedToPayment()">Proceed to Payment</button>
    </form>
  </div>
</div>

<script>
  const bookingType = document.getElementById("bookingType").value;

  if (bookingType.toLowerCase() === "company") {
    document.getElementById("idProofSection").classList.add("hidden");
    document.getElementById("companyProofSection").classList.remove("hidden");
  }

  function toggleCustomDates() {
    const duration = document.getElementById("duration").value;
    const customDates = document.getElementById("customDates");
    customDates.classList.toggle("hidden", duration !== "custom");
  }

  function calculateDays(duration) {
    if (duration === "weekly") return 7;
    if (duration === "monthly") return 30;
    if (duration === "yearly") return 365;
    if (duration === "custom") {
      const start = new Date(document.getElementById("startDate").value);
      const end = new Date(document.getElementById("endDate").value);
      if (isNaN(start) || isNaN(end) || end < start) return 0;
      return Math.ceil((end - start) / (1000 * 60 * 60 * 24)) + 1;
    }
    return 0;
  }

  function proceedToPayment() {
    const persons = parseInt(document.getElementById("persons").value);
    const availableSeats = parseInt(document.getElementById("availableSeats").textContent);
    const duration = document.getElementById("duration").value;
    const days = calculateDays(duration);

    if (persons > availableSeats) {
      alert("Not enough seats available!");
      return;
    }
    if (days <= 0) {
      alert("Please select valid duration/dates.");
      return;
    }

    const totalAmount = persons * days * 500 * 100; // price per day per person

    var options = {
      "key": "rzp_test_1DP5mmOlF5G5ag",
      "amount": totalAmount,
      "currency": "INR",
      "name": "Cozy Workspace",
      "description": "Workspace Booking Payment",
      "image": "https://via.placeholder.com/150",
      "handler": function (response) {
        alert("Payment successful! Payment ID: " + response.razorpay_payment_id);
      },
      "prefill": {
        "name": document.getElementById("userName").value,
        "email": document.getElementById("userEmail").value,
        "contact": document.getElementById("userContact").value
      },
      "theme": { "color": "#28a745" }
    };

    var rzp1 = new Razorpay(options);
    rzp1.open();
  }

  // Ensure correct state on page load
  toggleCustomDates();
</script>

</body>
</html>
